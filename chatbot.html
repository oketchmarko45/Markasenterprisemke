<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PetBot - Chat</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
    }

    .chatbot-container {
      width: 100%;
      max-width: 400px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      border: 1px solid #ccc;
      background-color: #fff;
      margin: 0 auto;
    }

    .chat-header {
      background-color: #003366;
      color: white;
      padding: 10px;
      text-align: center;
      font-weight: bold;
    }

    .chat-box {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
    }

    .chat-message {
      margin: 8px 0;
    }

    .chat-message strong {
      display: block;
    }

    .chat-input-area {
      display: flex;
      border-top: 1px solid #ccc;
    }

    #user-input {
      flex: 1;
      padding: 10px;
      border: none;
      outline: none;
    }

    #send-btn {
      padding: 10px 15px;
      background-color: #003366;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="chatbot-container">
    <div class="chat-header">üêæ PetBot</div>
    <div class="chat-box" id="chat-box"></div>
    <div class="chat-input-area">
      <input type="text" id="user-input" placeholder="Ask me about pets..." autocomplete="off" />
      <button id="send-btn">Send</button>
    </div>
    <button onclick="toggleChat()" style="padding: 8px 12px; background-color: #ccc; border: none; cursor: pointer;">
  Close Chat
</button>
    
  </div>

  <script>
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');

    const OPENAI_API_KEY = "your_openai_api_key_here"; // ‚Üê Replace with your actual key

    sendBtn.addEventListener('click', sendMessage);
    userInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') sendMessage();
    });

    function appendMessage(sender, message) {
      const msg = document.createElement('div');
      msg.classList.add('chat-message');
      msg.innerHTML = `<strong>${sender}:</strong> ${message}`;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function sendMessage() {
      const input = userInput.value.trim();
      if (!input) return;

      appendMessage('You', input);
      userInput.value = '';
      appendMessage('PetBot', '<em>Typing...</em>');

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${OPENAI_API_KEY}`
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [
              { role: "system", content: "You are PetBot, a friendly and knowledgeable assistant specializing in dogs and cats. You provide helpful, fun, and accurate answers about pet care, breeds, behavior, training, health, and grooming.When users ask about dogs:Recommend relevant books on training, breeds, or behavior.Suggest appropriate pet foods and medications when health or nutrition is mentioned.Keep your tone warm, engaging, and occasionally playful to make the chat experience enjoyable. Always stay helpful, concise, and focused on pets‚Äîespecially dogs and cats." },
              { role: "user", content: input }
            ]
          })
        });

        const data = await response.json();
        const botReply = data.choices?.[0]?.message?.content || "Sorry, I didn't understand that.";

        chatBox.lastChild.remove(); // remove "Typing..."
        appendMessage('PetBot', botReply);
      } catch (err) {
        console.error(err);
        chatBox.lastChild.remove();
        appendMessage('PetBot', '‚ö†Ô∏è Sorry, something went wrong.');
      }
    }
  </script>
</body>
</html>
