<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Markas Enterprise MKE</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="logo-brand">
      <img src="Images/logo.png" alt="Logo">
      <div class="brand-info">
        <h1 class="brand-name">Markas Enterprise MKE</h1>
        <p class="slogan">Make it a Reality</p>
      </div>
    </div>
    
    <!-- Hamburger Button -->
    <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>

    <nav id="main-nav">
      <a href="index.html">Home</a>
      <a href="#" onclick="loadPage('pages/about.html')">About</a>
      <a href="#" onclick="loadPage('pages/kennel.html')">Kennel</a>
             
      <div class="dropdown">
        <button class="dropbtn">Stores Available</button>
        <div class="dropdown-content">
          <a href="#" onclick="loadPage('pages/petstore.html')">Pet store</a>
          <a href="#" onclick="loadPage('pages/bookstore.html')">Book store</a>
          <a href="#" onclick="loadPage('pages/cart.html')">Cart</a>
        </div>
      </div>
    
      <a href="#" onclick="loadPage('pages/gallery.html')">Gallery</a>
      <a href="#" onclick="loadPage('pages/support.html')">Support</a>
      <a href="#" onclick="loadPage('pages/feedback.html')">Feedback</a>
      <a href="#" onclick="loadPage('pages/donate.html')">Donations</a>
      <a href="#" onclick="loadPage('pages/blog.html')">Blog</a>
    </nav>

    <!-- Cart icon shown only on specific pages -->
    <div id="cart-icon" style="display: none;">
      <a href="#" onclick="loadPage('pages/cart.html')">
        <i class="fas fa-shopping-cart"></i> 
        <span id="cart-count">0</span>
      </a>
    </div>
  </header>

  <!-- Main Content -->
  <main class="content">
    <!-- Slider -->
    <div class="slider" id="slider">
      <div class="slides">
        <img src="Images/slide1.jpg" alt="Scoob and the CEO 2024 nov" />
        <img src="Images/slide2.jpg" alt="Markas Enterprise event" />
        <img src="Images/slide3.jpg" alt="Pet supplies and books" />
        <!-- Add more images as needed -->
      </div>
      <div class="slider-buttons">
        <button id="prev">&#10094;</button>
        <button id="next">&#10095;</button>
      </div>
    </div>

    <!-- Intro -->
    <section class="intro">
      <h2>Who We Are</h2>
      <p>
        Markas Enterprise MKE is your trusted hub for everything dogs and more. From caring for our canine friends, sharing stories, offering essential pet supplies, to inspiring readers with heartfelt blogs‚Äîwe bring passion and expertise together to serve our community.
      </p>
    </section>

    <h1>Welcome to Markas Enterprise MKE</h1>
    <p>We're glad to have you here. Whether you're a dog lover, a reader, or someone who enjoys good stories and reliable services‚Äîthis is your space.</p>

    <section>
      <h2>üêæ The Kennel</h2>
      <p>Check out our beloved dogs, their stories, and what makes each one unique. We provide both adoption services and breeding information.</p>
      <a href="#" onclick="loadPage('pages/kennel.html')">Visit Kennel &rarr;</a>
    </section>
     
    <div class="section-divider"></div>    
    
    <section>
      <h2>üõí Our Stores</h2>
      <p>We've got something for both pets and humans. Visit our Pet Store for essential supplies or browse books in our Book Store.</p>
      <a href="#" onclick="loadPage('pages/petstore.html')">Pet Store &rarr;</a> | 
      <a href="#" onclick="loadPage('pages/bookstore.html')">Book Store &rarr;</a>
    </section>
     
    <div class="section-divider"></div>    
    
    <section>
      <h2>üñºÔ∏è Gallery</h2>
      <p>View moments from events, adorable pet photos, and highlights from our day-to-day activities.</p>
      <a href="#" onclick="loadPage('pages/gallery.html')">Explore Gallery &rarr;</a>
    </section>
     
    <div class="section-divider"></div>    
    
    <section>
      <h2>üìñ Blog</h2>
      <p>Catch up on stories, tips, and behind-the-scenes content straight from Mark the Dogtrovert!</p>
      <a href="#" onclick="loadPage('pages/blog.html')">Read the Blog &rarr;</a>
    </section>
     
    <div class="section-divider"></div>    
    
    <section>
      <h2>üì£ Feedback & Support</h2>
      <p>We'd love to hear from you. Reach out for support or leave us feedback to help improve your experience.</p>
      <a href="#" onclick="loadPage('pages/support.html')">Get Support</a> | 
      <a href="#" onclick="loadPage('pages/feedback.html')">Leave Feedback</a>
    </section>
     
    <div class="section-divider"></div>    
        
    <section>
      <h2>üíñ Support Our Work</h2>
      <p>If you love what we do and want to help us grow, consider making a donation. Every bit helps us continue our mission.</p>
      <a href="#" onclick="loadPage('pages/donate.html')">Donate Now &rarr;</a>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <h4>Markas Enterprise MKE</h4>
    <p>Created by 
     <a href="pages/marksprofile.html">Ochieng' Mark Oketch </a>
     ‚Äì Dogtrovert, Writer, Developer</p>
    <p>Contact : <a href="mailto:markasenterprisemke@gmail.com">Markas Enterprise MKE via mail</a></p>

    <div class="social-links">
      <a href="https://whatsapp.com/channel/0029VaQvCIiAYlUSCFIT903y" target="_blank" rel="noopener noreferrer" aria-label="Whatsapp"><i class="fab fa-whatsapp"></i></a>
      <a href="https://www.facebook.com/markasenterprisemke" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="https://youtube.com/@markasenterprisemke" target="_blank" rel="noopener noreferrer" aria-label="Youtube"><i class="fab fa-youtube"></i></a>
    </div>

    <p id="copyright"></p>
  </footer>

  <!-- Chatbot Container -->
<div id="chatbot-container" class="chatbot-container">
  <div class="chatbot-header">
    <h3>MKE Pet Assistant</h3>
    <button id="chatbot-close" class="chatbot-close">√ó</button>
  </div>
  <iframe id="chatbot-iframe" src="petbot.html" class="chatbot-iframe"></iframe>
</div>
<button id="chatbot-toggle" class="chatbot-toggle">
  <i class="fas fa-paw"></i>
</button>
  <script>
// Copyright year
const copyright = document.getElementById('copyright');
const startYear = 2024;
const currentYear = new Date().getFullYear();
if (currentYear === startYear) {
  copyright.textContent = `¬© ${startYear} Markas Enterprise MKE. All rights reserved.`;
} else {
  copyright.textContent = `¬© ${startYear} - ${currentYear} Markas Enterprise MKE. All rights reserved.`;
}

// Cart logic
function updateCartCount() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const cartCount = document.getElementById('cart-count');
  if (cartCount) {
    cartCount.textContent = cart.length;
  }
}

function toggleCartIcon(page) {
  const cartIcon = document.getElementById('cart-icon');
  const pagesToShowCart = ['kennel.html', 'petstore.html', 'bookstore.html', 'cart.html'];
  const show = pagesToShowCart.some(p => page.includes(p));
  cartIcon.style.display = show ? 'block' : 'none';
}

window.addEventListener('DOMContentLoaded', updateCartCount);

// Hamburger menu toggle
function toggleMenu() {
  const nav = document.getElementById('main-nav');
  const button = document.querySelector('.menu-toggle');
  nav.classList.toggle('show');
  button.innerText = button.classList.contains('active') ? '‚ò∞' : '‚úñ';
  button.classList.toggle('active');
}

// Slider functionality
const slides = document.querySelector('.slides');
const slideCount = document.querySelectorAll('.slides img').length;
let currentIndex = 0;

document.getElementById('next').addEventListener('click', () => {
  currentIndex = (currentIndex + 1) % slideCount;
  slides.style.transform = `translateX(-${currentIndex * 100}%)`;
});

document.getElementById('prev').addEventListener('click', () => {
  currentIndex = (currentIndex - 1 + slideCount) % slideCount;
  slides.style.transform = `translateX(-${currentIndex * 100}%)`;
});

setInterval(() => {
  currentIndex = (currentIndex + 1) % slideCount;
  slides.style.transform = `translateX(-${currentIndex * 100}%)`;
}, 5000);

// Unified Page Loading Function
function loadPage(pageUrl) {
  if (pageUrl.includes('marksprofile.html')) {
    window.location.href = pageUrl;
    return;
  }

  const cleanUrl = pageUrl.replace(/^pages\//, '');

  fetch('pages/' + cleanUrl)
    .then(response => {
      if (!response.ok) throw new Error('Page not found');
      return response.text();
    })
    .then(html => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      const content = doc.querySelector('main.content') || doc.body;
      document.querySelector('main.content').innerHTML = content.innerHTML;

      history.pushState({}, '', 'pages/' + cleanUrl);

      toggleCartIcon(cleanUrl); // Decide if cart icon should show
      updateCartCount();
      window.scrollTo(0, 0);

      const nav = document.getElementById('main-nav');
      if (nav.classList.contains('show')) toggleMenu();
    })
    .catch(() => {
      handlePageError('pages/404.html');
    });
}

function handlePageError(errorPage) {
  fetch(errorPage)
    .then(response => response.text())
    .then(html => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      const content = doc.querySelector('main.content') || doc.body;
      document.querySelector('main.content').innerHTML = content.innerHTML;
      history.replaceState({}, '', errorPage);
    })
    .catch(() => {
      document.querySelector('main.content').innerHTML = `
        <div class="error-message">
          <h2>Page Load Error</h2>
          <p>The requested page could not be loaded.</p>
          <a href="index.html">Return to Home</a>
        </div>
      `;
    });
}

// Handle back/forward browser navigation
window.addEventListener('popstate', function() {
  const path = window.location.pathname.split('/').pop();
  if (path === 'index.html' || path === '') {
    window.location.href = 'index.html';
  } else {
    loadPage('pages/' + path);
  }
});

// Initialize SPA link handling
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('a[href^="#"]').forEach(link => {
    if (!link.hasAttribute('onclick')) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetPage = this.getAttribute('href').substring(1);
        if (targetPage) {
          loadPage('pages/' + targetPage + '.html');
        }
      });
    }
  });

  updateCartCount();
  toggleCartIcon(window.location.pathname);
});
</script>

</body>
</html>
